<!DOCTYPE html>
<html>
<head>
  <title>MoodBuy PH Delivery App</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <style>
    body { margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
    video { max-width: 100%; height: auto; display: block; }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;
    const { createRoot } = ReactDOM;

    // Simple Icon component using emojis
    const Icon = ({ iconName, className = "w-5 h-5" }) => {
      const icons = {
        Sparkles:'âœ¨', Utensils:'ğŸ½ï¸', Shirt:'ğŸ‘š', Mic:'ğŸ¤', Send:'â¡ï¸', TrendingUp:'ğŸ“ˆ', Award:'ğŸ†',
        Share2:'ğŸ“¤', Menu:'â˜°', X:'âŒ', Music:'ğŸ¶', Plane:'âœˆï¸', ShoppingCart:'ğŸ›’', MapPin:'ğŸ“', CreditCard:'ğŸ’³',
        Clock:'âŒš', Star:'â­', Camera:'ğŸ“·'
      };
      return <span className={`inline-block ${className}`}>{icons[iconName] || ''}</span>;
    };

    const MoodBuyPH = () => {
      const [activeTab, setActiveTab] = useState('trending');
      const [apiKey, setApiKey] = useState('');
      const [showApiInput, setShowApiInput] = useState(true);
      const [recommendations, setRecommendations] = useState([]);
      const [cart, setCart] = useState([]);
      const [deliveryAddress, setDeliveryAddress] = useState('');

      // Mock fetch function simulating Claude AI response
      const fetchAIRecommendations = async (section) => {
        // Show loading first
        setRecommendations([{ id:0, name:"Loading...", category:"", price:0, image:"https://via.placeholder.com/150" }]);

        // Mock delay
        await new Promise(r => setTimeout(r, 1500));

        // Mock data for each section
        const data = {
          trending: [
            { id:1, name:"Filipino Streetwear Tee", category:"OOTD", price:650, image:"https://via.placeholder.com/150/FFB6C1/000000?text=OOTD1" },
            { id:2, name:"Ube Cheese Pandesal", category:"Food", price:180, image:"https://via.placeholder.com/150/FFE4B5/000000?text=Food1" },
            { id:3, name:"BTS Manila Concert Ticket", category:"Concert", price:5500, image:"https://via.placeholder.com/150/ADD8E6/000000?text=Concert1" },
            { id:4, name:"El Nido Adventure Package", category:"Travel", price:8999, image:"https://via.placeholder.com/150/98FB98/000000?text=Travel1" },
          ],
          ootd: [
            { id:5, name:"Local Denim Jacket", category:"OOTD", price:1200, image:"https://via.placeholder.com/150/FFB6C1/000000?text=OOTD2" },
            { id:6, name:"Barong Tagalog Modern", category:"OOTD", price:1800, image:"https://via.placeholder.com/150/FF69B4/000000?text=OOTD3" },
            { id:7, name:"Filipino Handwoven Bag", category:"OOTD", price:900, image:"https://via.placeholder.com/150/FF1493/000000?text=OOTD4" },
          ],
          food: [
            { id:8, name:"Halo-Halo Dessert Set", category:"Food", price:250, image:"https://via.placeholder.com/150/FFE4B5/000000?text=Food2" },
            { id:9, name:"Adobo Meal Pack", category:"Food", price:350, image:"https://via.placeholder.com/150/FFD700/000000?text=Food3" },
            { id:10, name:"Sinigang sa Miso", category:"Food", price:400, image:"https://via.placeholder.com/150/FFA500/000000?text=Food4" },
          ],
          concert: [
            { id:11, name:"BLACKPINK Manila Concert", category:"Concert", price:8000, image:"https://via.placeholder.com/150/ADD8E6/000000?text=Concert2" },
            { id:12, name:"Adele Concert Philippines", category:"Concert", price:9500, image:"https://via.placeholder.com/150/87CEFA/000000?text=Concert3" },
            { id:13, name:"Ed Sheeran PH Tour", category:"Concert", price:7200, image:"https://via.placeholder.com/150/4682B4/000000?text=Concert4" },
          ],
          travel: [
            { id:14, name:"Boracay 3D/2N Package", category:"Travel", price:12000, image:"https://via.placeholder.com/150/98FB98/000000?text=Travel2" },
            { id:15, name:"Chocolate Hills Bohol Trip", category:"Travel", price:4500, image:"https://via.placeholder.com/150/00FA9A/000000?text=Travel3" },
            { id:16, name:"Cebu Island Hopping", category:"Travel", price:7500, image:"https://via.placeholder.com/150/32CD32/000000?text=Travel4" },
          ]
        };
        setRecommendations(data[section] || []);
      };

      const handleAddCart = (item) => {
        setCart(prev => {
          const existing = prev.find(i => i.id === item.id);
          if(existing) return prev.map(i => i.id===item.id ? {...i, quantity:i.quantity+1} : i);
          return [...prev, {...item, quantity:1}];
        });
      };

      const handleCheckout = () => {
        if(!deliveryAddress){ alert("Please enter delivery address."); return; }
        alert(`Order placed! ${cart.length} items. Total: â‚±${cart.reduce((t,i)=>t+i.price*i.quantity,0)}. Shipping to: ${deliveryAddress}`);
        setCart([]); setDeliveryAddress('');
      };

      useEffect(() => { if(!showApiInput && activeTab) fetchAIRecommendations(activeTab); }, [activeTab, showApiInput]);

      return (
        <div className="min-h-screen flex flex-col md:flex-row">
          {/* Sidebar */}
          <div className="bg-purple-900 text-white p-6 w-full md:w-64 flex-shrink-0">
            <h1 className="text-3xl font-bold mb-6 flex items-center space-x-2">
              <Icon iconName="Sparkles" /> <span>MoodBuy PH</span>
            </h1>
            {showApiInput ? (
              <div className="space-y-3">
                <input type="password" placeholder="Enter Claude API Key" value={apiKey} onChange={e=>setApiKey(e.target.value)} className="w-full p-2 rounded text-gray-800"/>
                <button onClick={()=>setShowApiInput(false)} className="w-full py-2 bg-purple-500 rounded hover:bg-purple-600">Save Key</button>
              </div>
            ) : (
              <nav className="space-y-3">
                {['trending','ootd','food','concert','travel'].map(tab => (
                  <button key={tab} onClick={()=>setActiveTab(tab)} className={`w-full py-2 px-3 rounded text-left hover:bg-purple-700 ${activeTab===tab ? 'bg-purple-700' : ''}`}>
                    {tab.toUpperCase()}
                  </button>
                ))}
              </nav>
            )}
          </div>

          {/* Main */}
          <main className="flex-1 p-4 bg-gray-50">
            <h2 className="text-3xl font-bold mb-4 text-gray-800">{activeTab.toUpperCase()} Picks</h2>
            <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
              {recommendations.map(item => (
                <div key={item.id} className="bg-white rounded-xl shadow p-4 flex flex-col">
                  <img src={item.image} alt={item.name} className="h-40 w-full object-cover rounded mb-4"/>
                  <h3 className="text-lg font-bold text-gray-800">{item.name}</h3>
                  <p className="text-sm text-gray-500">{item.category}</p>
                  <p className="text-xl font-bold text-green-600 mb-4">â‚±{item.price}</p>
                  <button onClick={()=>handleAddCart(item)} className="mt-auto py-2 bg-purple-600 text-white rounded hover:bg-purple-700 flex items-center justify-center space-x-2">
                    <Icon iconName="ShoppingCart"/> <span>Add to Cart</span>
                  </button>
                </div>
              ))}
            </div>

            {/* Cart & Checkout */}
            <div className="mt-8 bg-white p-4 rounded-xl shadow space-y-4">
              <h3 className="text-2xl font-bold">Cart ({cart.reduce((t,i)=>t+i.quantity,0)} items)</h3>
              {cart.map(item=>(
                <div key={item.id} className="flex justify-between border-b py-2">
                  <span>{item.name} x {item.quantity}</span>
                  <span>â‚±{item.price*item.quantity}</span>
                </div>
              ))}
              <input type="text" placeholder="Delivery Address" value={deliveryAddress} onChange={e=>setDeliveryAddress(e.target.value)} className="w-full p-2 border rounded"/>
              <button onClick={handleCheckout} className="w-full py-2 bg-green-600 text-white rounded hover:bg-green-700">Checkout</button>
            </div>
          </main>
        </div>
      );
    };

    const root = createRoot(document.getElementById('root'));
    root.render(<MoodBuyPH />);
  </script>
</body>
</html>
